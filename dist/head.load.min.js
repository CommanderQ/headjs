/*
 * HeadJS     The only script in your <HEAD>    
 * Author     Tero Piirainen  (tipiirai)
 * Maintainer Robert Hoffmann (itechnology)
 * License    MIT / http://bit.ly/mit-license
 *
 * Version 0.99
 * http://headjs.com
 */
(function(N,M){var h=N.document,k=[],I=[],p={},f={},u="async" in h.createElement("script")||"MozAppearance" in h.documentElement.style||N.opera,x,v,q=N.head_conf&&N.head_conf.head||"head",b=N[q]=(N[q]||function(){b.ready.apply(null,arguments)}),H=1,G=2,B=3,A=4;b.load=b.js=u?c:d;b.test=g;b.ready=J;function C(){}function n(e,O){if(!e){return}if(typeof e==="object"){e=[].slice.call(e)}for(var P=0,Q=e.length;P<Q;P++){O.call(e,e[P],P)}}function s(P,O){var e=Object.prototype.toString.call(O).slice(8,-1);return O!==M&&O!==null&&e===P}function w(e){return s("Function",e)}function t(e){return s("Array",e)}function K(Q){var O=Q.split("/"),P=O[O.length-1],e=P.indexOf("?");return e!==-1?P.substring(0,e):P}function D(e){e=e||C;if(e._done){return}e();e._done=1}function g(S,R,O,e){var P=(typeof S==="object")?S:{test:S,success:!!R?t(R)?R:[R]:false,failure:!!O?t(O)?O:[O]:false,callback:e||C};var Q=!!P.test;if(Q&&!!P.success){P.success.push(P.callback);b.load.apply(null,P.success)}else{if(!Q&&!!P.failure){P.failure.push(P.callback);b.load.apply(null,P.failure)}else{e()}}return b}function o(P){var e={};if(typeof P==="object"){var R=P.options||{};for(var Q in P){if(!!P[Q]&&Q!=="options"){e={name:Q,url:P[Q],async:!!R.async};w(R.callback)&&b.ready(Q,R.callback)}}}else{e={name:K(P),url:P}}var O=f[e.name];if(O&&O.url===e.url){return O}f[e.name]=e;return e}function a(e){e=e||f;for(var O in e){if(e.hasOwnProperty(O)&&e[O].state!==A){return false}}return true}function E(e){e.state=G;n(e.onpreload,function(O){O.call()})}function F(e,O){if(e.state===M){e.state=H;e.onpreload=w(O)?[O]:[];z({url:e.url,type:"cache"},function(){E(e)})}}function d(){var e=arguments,P=[].slice.call(e,1),O=P[0];if(!x){I.push(function(){b.load.apply(null,e)});return b}if(!!O){n(P,function(Q){if(!w(Q)&&!!Q){F(o(Q))}});y(o(e[0]),w(O)?O:function(){b.load.apply(null,P)})}else{y(o(e[0]))}return b}function c(){var e=arguments,O=e[e.length-1],P={};if(!w(O)){O=null}if(t(e[0])){e[0].push(O);b.load.apply(null,e[0]);return b}n(e,function(R,Q){if(R!==O){R=o(R);P[R.name]=R;y(R,O&&(R.async||Q===e.length-2)?function(){if(a(P)){D(O)}}:null)}});return b}function y(e,O){O=O||C;if(e.state===A){O();return}if(e.state===B){b.ready(e.name,O);return}if(e.state===H){e.onpreload.push(function(){y(e,O)});return}e.state=B;z(e,function(){e.state=A;O();n(p[e.name],function(P){D(P)});if(v&&a()){n(p.ALL,function(P){D(P)})}})}function z(e,O){O=O||C;var P;if(/\.css[^\.]*$/.test(e.url)){P=h.createElement("link");P.type="text/"+(e.type||"css");P.rel="stylesheet";P.href=e.url}else{P=h.createElement("script");P.type="text/"+(e.type||"javascript");P.src=e.url}P.onload=P.onreadystatechange=S;P.onerror=Q;P.async=!!e.async;P.defer=false;function Q(T){T=T||N.event;P.onload=P.onreadystatechange=P.onerror=null;O()}function S(T){T=T||N.event;if(T.type==="load"||(/loaded|complete/.test(P.readyState)&&(!h.documentMode||h.documentMode<9))){P.onload=P.onreadystatechange=P.onerror=null;O()}}var R=h.head||h.getElementsByTagName("head")[0];R.insertBefore(P,R.lastChild)}function r(){var P=h.getElementsByTagName("script");for(var O=0,Q=P.length;O<Q;O++){var e=P[0].getAttribute("data-head-init");if(!!e){b.load(e);return}}}function J(R,P){if(R===h){if(v){D(P)}else{k.push(P)}return b}if(w(R)){P=R;R="ALL"}if(t(R)){var Q={};n(R,function(S){Q[S]=f[S];b.ready(S,function(){a(Q)&&D(P)})});return b}if(typeof R!=="string"||!w(P)){return b}var O=f[R];if(O&&O.state===A||R==="ALL"&&a()&&v){D(P);return b}var e=p[R];if(!e){e=p[R]=[P]}else{e.push(P)}return b}function j(){if(!h.body){N.clearTimeout(b.readyTimeout);b.readyTimeout=N.setTimeout(j,50);return}if(!v){v=true;r();n(k,function(e){D(e)})}}function i(){if(h.addEventListener){h.removeEventListener("DOMContentLoaded",i,false);j()}else{if(h.readyState==="complete"){h.detachEvent("onreadystatechange",i);j()}}}if(h.readyState==="complete"){j()}else{if(h.addEventListener){h.addEventListener("DOMContentLoaded",i,false);N.addEventListener("load",j,false)}else{h.attachEvent("onreadystatechange",i);N.attachEvent("onload",j);var L=false;try{L=N.frameElement===null&&h.documentElement}catch(m){}if(L&&L.doScroll){(function l(){if(!v){try{L.doScroll("left")}catch(e){N.clearTimeout(b.readyTimeout);b.readyTimeout=N.setTimeout(l,50);return}j()}})()}}}b.ready(h,function(){if(a()){n(p.ALL,function(e){D(e)})}if(b.feature){b.feature("domloaded",true)}});setTimeout(function(){x=true;n(I,function(e){e()})},300)})(window);