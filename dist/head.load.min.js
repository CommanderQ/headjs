/*
 * HeadJS     The only script in your <HEAD>    
 * Author     Tero Piirainen  (tipiirai)
 * Maintainer Robert Hoffmann (itechnology)
 * License    MIT / http://bit.ly/mit-license
 *
 * Version 0.99
 * http://headjs.com
 */
(function(J,I){var d=J.document,h=[],F=[],m={},c={},r="async" in d.createElement("script")||"MozAppearance" in d.documentElement.style||J.opera,u,s,n=J.head_conf&&J.head_conf.head||"head",b=J[n]=(J[n]||function(){b.ready.apply(null,arguments)}),E=1,D=2,y=3,x=4;if(r){b.load=function(){var e=arguments,K=e[e.length-1],L={};if(!t(K)){K=null}if(q(e[0])){e[0].push(K);b.load.apply(null,e[0]);return b}k(e,function(N,M){if(N!==K){N=l(N);L[N.name]=N;v(N,K&&(N.async||M===e.length-2)?function(){if(a(L)){A(K)}}:null)}});return b}}else{b.load=function(){var e=arguments,L=[].slice.call(e,1),K=L[0];if(!u){F.push(function(){b.load.apply(null,e)});return b}if(!!K){k(L,function(M){if(!t(M)&&!!M){C(l(M))}});v(l(e[0]),t(K)?K:function(){b.load.apply(null,L)})}else{v(l(e[0]))}return b}}b.js=b.load;b.test=function(O,N,K,e){var L=(typeof O==="object")?O:{test:O,success:!!N?q(N)?N:[N]:false,failure:!!K?q(K)?K:[K]:false,callback:e||z};var M=!!L.test;if(M&&!!L.success){L.success.push(L.callback);b.load.apply(null,L.success)}else{if(!M&&!!L.failure){L.failure.push(L.callback);b.load.apply(null,L.failure)}else{e()}}return b};b.ready=function(N,L){if(N===d){if(s){A(L)}else{h.push(L)}return b}if(t(N)){L=N;N="ALL"}if(q(N)){var M={};k(N,function(O){M[O]=c[O];b.ready(O,function(){a(M)&&A(L)})});return b}if(typeof N!=="string"||!t(L)){return b}var K=c[N];if(K&&K.state===x||N==="ALL"&&a()&&s){A(L);return b}var e=m[N];if(!e){e=m[N]=[L]}else{e.push(L)}return b};b.ready(d,function(){if(a()){k(m.ALL,function(e){A(e)})}if(b.feature){b.feature("domloaded",true)}});function z(){}function k(e,K){if(!e){return}if(typeof e==="object"){e=[].slice.call(e)}for(var L=0,M=e.length;L<M;L++){K.call(e,e[L],L)}}function p(L,K){var e=Object.prototype.toString.call(K).slice(8,-1);return K!==I&&K!==null&&e===L}function t(e){return p("Function",e)}function q(e){return p("Array",e)}function G(M){var K=M.split("/"),L=K[K.length-1],e=L.indexOf("?");return e!==-1?L.substring(0,e):L}function A(e){e=e||z;if(e._done){return}e();e._done=1}function l(L){var e={};if(typeof L==="object"){var N=L.options||{};for(var M in L){if(!!L[M]&&M!=="options"){e={name:M,url:L[M],async:!!N.async};t(N.callback)&&b.ready(M,N.callback)}}}else{e={name:G(L),url:L}}var K=c[e.name];if(K&&K.url===e.url){return K}c[e.name]=e;return e}function a(e){e=e||c;for(var K in e){if(e.hasOwnProperty(K)&&e[K].state!==x){return false}}return true}function B(e){e.state=D;k(e.onpreload,function(K){K.call()})}function C(e,K){if(e.state===I){e.state=E;e.onpreload=t(K)?[K]:[];w({url:e.url,type:"cache"},function(){B(e)})}}function v(e,K){K=K||z;if(e.state===x){K();return}if(e.state===y){b.ready(e.name,K);return}if(e.state===E){e.onpreload.push(function(){v(e,K)});return}e.state=y;w(e,function(){e.state=x;K();k(m[e.name],function(L){A(L)});if(s&&a()){k(m.ALL,function(L){A(L)})}})}function w(e,K){K=K||z;var L;if(/\.css[^\.]*$/.test(e.url)){L=d.createElement("link");L.type="text/"+(e.type||"css");L.rel="stylesheet";L.href=e.url}else{L=d.createElement("script");L.type="text/"+(e.type||"javascript");L.src=e.url}L.onload=L.onreadystatechange=O;L.onerror=M;L.async=!!e.async;L.defer=false;function M(P){P=P||J.event;L.onload=L.onreadystatechange=L.onerror=null;K()}function O(P){P=P||J.event;if(P.type==="load"||(/loaded|complete/.test(L.readyState)&&(!d.documentMode||d.documentMode<9))){L.onload=L.onreadystatechange=L.onerror=null;K()}}var N=d.head||d.getElementsByTagName("head")[0];N.insertBefore(L,N.lastChild)}function o(){var L=d.getElementsByTagName("script");for(var K=0,M=L.length;K<M;K++){var e=L[0].getAttribute("data-head-init");if(!!e){b.load(e);return}}}function g(){if(!d.body){J.clearTimeout(b.readyTimeout);b.readyTimeout=J.setTimeout(g,50);return}if(!s){s=true;o();k(h,function(e){A(e)})}}function f(){if(d.addEventListener){d.removeEventListener("DOMContentLoaded",f,false);g()}else{if(d.readyState==="complete"){d.detachEvent("onreadystatechange",f);g()}}}if(d.readyState==="complete"){g()}else{if(d.addEventListener){d.addEventListener("DOMContentLoaded",f,false);J.addEventListener("load",g,false)}else{d.attachEvent("onreadystatechange",f);J.attachEvent("onload",g);var H=false;try{H=J.frameElement===null&&d.documentElement}catch(j){}if(H&&H.doScroll){(function i(){if(!s){try{H.doScroll("left")}catch(e){J.clearTimeout(b.readyTimeout);b.readyTimeout=J.setTimeout(i,50);return}g()}})()}}}setTimeout(function(){u=true;k(F,function(e){e()})},300)})(window);